#!/usr/bin/env php
<?php

require __DIR__ . '/../Sniffs/bootstrap.php';

$arguments = array(
    '--runtime-set',
    'installed_paths',
    realpath(__DIR__ . '/../..'),
);

// set standard standard name if not given
if (false === stripos(implode($argv), '--standard=')) {
    $arguments[] = '--standard=' . basename(dirname(__DIR__));
}

// Insert special arguments before all others
array_splice($argv, 1, 0, $arguments);
$argc = sizeof($argv);

$_SERVER['argv'] = $argv;
$_SERVER['argc'] = $argc;

$phpcsFilename = realpath($rootPath . '/vendor/bin/phpcs');
if (is_file($phpcsFilename)) {
    $result = ob_start(function ($buffer) {
        return (str_replace('#!/usr/bin/env php' . PHP_EOL, '', $buffer));
    });
    require $phpcsFilename;
    ob_end_flush();
}
